<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>buzz.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Buzz</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="buzz.core.html"><div class="inner"><span>buzz.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="buzz.core.html#var-buzz"><div class="inner"><span>buzz</span></div></a></li><li class="depth-1"><a href="buzz.core.html#var-close.21"><div class="inner"><span>close!</span></div></a></li><li class="depth-1"><a href="buzz.core.html#var-put.21"><div class="inner"><span>put!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">buzz.core</h1><div class="doc"><pre class="plaintext">Asynchronous state management based on messages.
</pre></div><div class="public anchor" id="var-buzz"><h3>buzz</h3><div class="usage"><code>(buzz state-atom handle-fn execute-fn)</code><code>(buzz state-atom handle-fn execute-fn opts)</code></div><div class="doc"><pre class="plaintext">Creates buzz which manages given state-atom based on messages.

Arguments:

1. state-atom - Atom managed by this buzz instance.

2. handle-fn - Handle function.

   This function have to:
   - obligatorily produce new value for managed atom based on current value
     and passed message,
   - optionally produce command to execute.

   Function must accept two arguments:
   [current-state-val message]
   where:
     - current-state-val is the current value of managed atom,
     - message is the message to handle,
   and returns one of following:
   - [new-state-val]
       vector with new state value,
   - [new-state-val cmd]
       vector with new state value and command to execute, the nil cmd
       is treated like no command

3. execute-fn - Execute function.

   This function have to produce core.async channel which will return
   new message(s). Messages returned by this channel are passed later
   to handle-fn function.

   Function must accept one argument:
   [cmd]
   where cmd is a command returned from handle-fn
   and returns core.async channel which returns messages.

4. opts - Optional options map.

   This map contains options which override default options.

   This map may contain following keys:
   - :handle-ex-fn
        Value for this key must be a function which handles exceptions
        thrown by handle-fn. Default value for this key is default-handle-ex.
        This function accepts two arguments:
        [message exception]
        where:
          - message is a message for which exception occured,
          - exception is a exception throwed by handle-fn function.</pre></div></div><div class="public anchor" id="var-close.21"><h3>close!</h3><div class="usage"><code>(close! buzz)</code></div><div class="doc"><pre class="plaintext">Closes buzz.
</pre></div></div><div class="public anchor" id="var-put.21"><h3>put!</h3><div class="usage"><code>(put! buzz message)</code></div><div class="doc"><pre class="plaintext">Puts message into buzz.
</pre></div></div></div></body></html>